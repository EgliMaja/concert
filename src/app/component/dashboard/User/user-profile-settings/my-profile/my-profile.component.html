<div class="container mt-5 m-5">
  <div class="d-flex justify-content-center">
    <h4 class="text-secondary">My Profile</h4>
  </div>

  <div *ngIf="loadingSpinner; else profileData" class="body-ticket d-flex justify-content-center">
    <mat-spinner></mat-spinner>
  </div>

  <ng-template #profileData>
    <form [formGroup]="formGroupProfile">
      <div class="row mt-5 ps-5 d-flex justify-content-center">
        <div class="col-6 ">
          <!--  First Name    -->
          <mat-form-field class="example-full-width mb-5">
            <mat-label>First Name</mat-label>
            <input matInput name="firstName" formControlName="firstName">
            <mat-hint *ngIf="firstName?.invalid ||  (firstName?.touched ||  firstName?.dirty)"
                      class="text-danger fw-bold">
              <div *ngIf="firstName?.errors?.['required']">First Name is Required</div>
              <div *ngIf="firstName?.errors?.['minlength']">First Name should have at least 3 characters</div>
              <div *ngIf="firstName?.errors?.['maxlength']">First Name should have less than 21 characters</div>
              <div *ngIf="firstName?.errors?.['pattern']">Not Allowed Number Characters</div>
            </mat-hint>
          </mat-form-field>

          <!--  Email    -->
          <mat-form-field class="example-full-width mb-5">
            <mat-label>Email</mat-label>
            <input matInput name="email" formControlName="email">
            <mat-hint *ngIf="email?.invalid ||  (email?.touched ||  email?.dirty)"
                      class="text-danger fw-bold">
              <div *ngIf="email?.errors?.['required']">Email is Required</div>
              <div *ngIf="email?.errors?.['email']">Missing @ character</div>
            </mat-hint>
          </mat-form-field>

          <!--  Phone    -->
          <mat-form-field class="example-full-width mb-5">
            <mat-label>Phone</mat-label>
            <input matInput name="phone" formControlName="phone">
            <mat-hint *ngIf="phoneNumber?.invalid ||  (phoneNumber?.touched ||  phoneNumber?.dirty)"
                      class="text-danger fw-bold">
              <div *ngIf="phoneNumber?.errors?.['required']">Phone Number is Required</div>
              <div *ngIf="phoneNumber?.errors?.['minlength']">Phone Number should have at least 12 characters</div>
              <div *ngIf="phoneNumber?.errors?.['pattern']">Phone Number Format is not Correct! Missing + character</div>
            </mat-hint>
          </mat-form-field>

        </div>

        <div class="col-6">
          <!--  Last Name    -->
          <mat-form-field class="example-full-width mb-5">
            <mat-label>Last Name</mat-label>
            <input matInput name="lastName" formControlName="lastName">
            <mat-hint *ngIf="lastName?.invalid ||  (lastName?.touched ||  lastName?.dirty)"
                      class="text-danger fw-bold">
              <div *ngIf="lastName?.errors?.['required']">Last Name is Required</div>
              <div *ngIf="lastName?.errors?.['minlength']">Last Name should have at least 3 characters</div>
              <div *ngIf="lastName?.errors?.['maxlength']">Last Name should have less than 21 characters</div>
              <div *ngIf="lastName?.errors?.['pattern']">Not Allowed Number Characters</div>
            </mat-hint>
          </mat-form-field>

          <!--  Password    -->
          <mat-form-field class="example-full-width mb-4">
            <mat-label>Password</mat-label>
            <input matInput [type]="isVisiblePassword ? 'text' : 'password' " placeholder=" Password "
                   name="password" formControlName="password">
            <div>
              <i *ngIf="isVisiblePassword" (click)="hidePassword()" class="fa-solid fa-eye-slash px-5 mx-5"></i>
              <i *ngIf="!isVisiblePassword" (click)="visiblePassword()" class="fa-solid fa-eye px-5 mx-5"></i>
            </div>
            <mat-hint *ngIf="currentPassword?.invalid ||  (currentPassword?.touched ||  currentPassword?.dirty)"
                      class="text-danger fw-bold">
              <div *ngIf="currentPassword?.errors?.['required']">Password is Required</div>
              <div *ngIf="currentPassword?.errors?.['minlength']">Password should have at least 8
                characters
              </div>
              <div *ngIf="currentPassword?.errors?.['maxlength']">Password should have less than 16
                characters
              </div>
            </mat-hint>
          </mat-form-field>

          <!--  Role    -->
          <mat-form-field class="example-full-width mb-5">
            <mat-label>Role</mat-label>
            <input matInput name="role" formControlName="role">
            <mat-hint *ngIf="role?.invalid ||  (role?.touched || role?.dirty)">
              <div *ngIf="role?.errors?.['required']">Role is Required</div>
            </mat-hint>
          </mat-form-field>
        </div>
      </div>
    </form>
  </ng-template>

  <div  *ngIf="isBtnChangeDataClicked" class="d-flex justify-content-center">
    <button class="btn btn-dark" (click)="makeFieldsEnabled()">Change My Data</button>
  </div>

  <div class="d-flex justify-content-center mt-3">
    <button class="btn btn-outline-primary" [disabled]="formGroupProfile.invalid" (click)="updateProfile(formGroupProfile.value)">
      Save Changes
    </button>
  </div>

</div>
